<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cursor AI + GCP 통합 MCP 구축 가이드</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Noto Sans KR', sans-serif; background-color: #f8fafc; color: #334155; }
        .chart-container { position: relative; width: 100%; max-width: 600px; margin: auto; height: 300px; }
        .step-active { border-left: 4px solid #2563eb; background-color: #ffffff; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1); }
        .step-inactive { border-left: 4px solid transparent; opacity: 0.6; }
        .code-block { background-color: #1e293b; color: #e2e8f0; font-family: monospace; padding: 1rem; border-radius: 0.5rem; overflow-x: auto; position: relative; }
        .btn-primary { background-color: #2563eb; color: white; padding: 0.5rem 1rem; border-radius: 0.375rem; transition: all 0.2s; }
        .btn-primary:hover { background-color: #1d4ed8; }
        .verify-box { background-color: #f0fdf4; border: 1px solid #10b981; padding: 1rem; border-radius: 0.5rem; margin-top: 1.5rem; }
        .link-card { display: inline-flex; align-items: center; padding: 0.5rem 0.75rem; background-color: #eff6ff; color: #1d4ed8; border-radius: 0.375rem; font-size: 0.875rem; font-weight: 500; }
        .fade-in { animation: fadeIn 0.5s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body class="min-h-screen flex flex-col">

    <nav class="bg-white border-b border-slate-200 sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <span class="text-2xl font-bold text-slate-800">📡 GCP MCP Connect</span>
                    <span class="ml-4 text-sm bg-blue-100 text-blue-800 py-1 px-2 rounded-full hidden sm:inline-block">BigQuery & Logging 통합 가이드</span>
                </div>
                <div class="flex items-center space-x-4">
                    <button onclick="navigateTo('overview')" class="text-slate-600 hover:text-blue-600 font-medium">개요</button>
                    <button onclick="navigateTo('wizard')" class="text-slate-600 hover:text-blue-600 font-medium">가이드 시작</button>
                    <button onclick="navigateTo('troubleshoot')" class="text-slate-600 hover:text-blue-600 font-medium">문제 해결</button>
                </div>
            </div>
        </div>
    </nav>

    <main class="flex-grow max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 w-full">
        <div id="view-overview" class="fade-in block">
            <div id="view-overview" class="fade-in block">
                <div class="text-center mb-16 pt-4">
                    <h1 class="text-5xl font-black text-slate-900 mb-6 tracking-tight">
                        BigQuery & Logging <span class="text-blue-600">MCP 구축 가이드</span>
                    </h1>
                    <p class="text-xl text-slate-500 max-w-3xl mx-auto leading-relaxed font-medium">
                        데이터 추출부터 실시간 로그 분석까지, <br>
                        <span class="text-slate-800 font-bold">Cursor AI를 사내 전담 데이터 엔지니어</span>로 변신시킵니다.
                    </p>
                    <button onclick="navigateTo('wizard')" class="mt-10 btn-primary text-lg px-12 py-4 shadow-[0_15px_30px_rgba(37,99,235,0.25)] transform hover:-translate-y-1 transition-all font-bold">
                        가이드 시작하기 🚀
                    </button>
                </div>
            
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-12">
                    <div class="bg-slate-900 p-8 rounded-[2.5rem] shadow-[0_30px_60px_-12px_rgba(0,0,0,0.4)] border border-slate-800 relative overflow-hidden min-h-[480px] flex flex-col justify-between group">
                        <div class="absolute inset-0 opacity-10" style="background-image: radial-gradient(#2563eb 1px, transparent 1px); background-size: 24px 24px;"></div>
                        <div class="relative z-10">
                            <div class="flex items-center justify-between mb-10">
                                <div>
                                    <h2 class="text-xl font-bold text-white mb-1">GCP MCP 통합 에코시스템</h2>
                                    <p class="text-slate-500 text-[10px] uppercase tracking-[0.25em] font-black">Next-Gen Engineering Workflow</p>
                                </div>
                                <div class="px-3 py-1 bg-blue-500/10 border border-blue-500/20 rounded-full">
                                    <span class="flex items-center gap-2 text-[10px] font-bold text-blue-400">
                                        <span class="relative flex h-2 w-2"><span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-blue-400 opacity-75"></span><span class="relative inline-flex rounded-full h-2 w-2 bg-blue-500"></span></span> ACTIVE
                                    </span>
                                </div>
                            </div>
                            <div class="space-y-5">
                                <div class="flex items-center gap-5 p-4 bg-white/5 border border-white/10 rounded-2xl">
                                    <div class="w-12 h-12 bg-blue-600/20 rounded-xl flex items-center justify-center text-blue-400 font-bold shadow-inner">AI</div>
                                    <div><h4 class="text-xs font-bold text-white uppercase tracking-wider">Cursor AI Engine</h4><p class="text-[10px] text-slate-500 mt-1">지능형 쿼리 및 로그 분석 인터페이스</p></div>
                                </div>
                                <div class="flex justify-center opacity-30"><svg class="w-6 h-6 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M19 14l-7 7m0 0l-7-7m7 7V3" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></div>
                                <div class="flex items-center gap-5 p-4 bg-blue-600 rounded-2xl shadow-xl transform scale-[1.03]">
                                    <div class="w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center text-white font-bold shadow-inner">MCP</div>
                                    <div><h4 class="text-xs font-bold text-white uppercase tracking-wider">MCP Protocol Bridge</h4><p class="text-[10px] text-blue-100 mt-1">BigQuery & Logging 통합 연동 레이어</p></div>
                                </div>
                                <div class="flex justify-center opacity-30"><svg class="w-6 h-6 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M19 14l-7 7m0 0l-7-7m7 7V3" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></div>
                                <div class="flex items-center gap-5 p-4 bg-white/5 border border-white/10 rounded-2xl">
                                    <div class="w-12 h-12 bg-emerald-600/20 rounded-xl flex items-center justify-center text-emerald-400 font-bold shadow-inner">GCP</div>
                                    <div><h4 class="text-xs font-bold text-white uppercase tracking-wider">GCP Infrastructure</h4><p class="text-[10px] text-slate-500 mt-1">사내 운영 프로젝트 데이터 자산</p></div>
                                </div>
                            </div>
                        </div>
                    </div>
                
                    <div class="flex flex-col gap-8">
                        <div class="bg-white p-8 rounded-[2.5rem] shadow-sm border border-slate-100 flex-grow flex flex-col justify-between">
                            <div>
                                <h2 class="text-xl font-bold text-slate-800 mb-10 flex items-center gap-3">
                                    <span class="w-8 h-8 bg-slate-100 rounded-lg flex items-center justify-center text-sm">🛠️</span>
                                    통합 연동 체크포인트
                                </h2>
                                <div class="space-y-4">
                                    <div class="p-5 bg-blue-50/50 rounded-2xl border border-blue-100 flex items-center gap-5">
                                        <span class="w-3 h-3 rounded-full bg-blue-600 shadow-lg shadow-blue-500/50"></span>
                                        <span class="text-sm font-bold text-slate-700">GCP 프로젝트 권한 자동 연동</span>
                                    </div>
                                    <div class="p-5 bg-emerald-50/50 rounded-2xl border border-emerald-100 flex items-center gap-5">
                                        <span class="w-3 h-3 rounded-full bg-emerald-600 shadow-lg shadow-emerald-500/50"></span>
                                        <span class="text-sm font-bold text-slate-700">BigQuery 실시간 스키마 탐색</span>
                                    </div>
                                    <div class="p-5 bg-amber-50/50 rounded-2xl border border-amber-100 flex items-center gap-5">
                                        <span class="w-3 h-3 rounded-full bg-amber-600 shadow-lg shadow-amber-500/50"></span>
                                        <span class="text-sm font-bold text-slate-700">Logging 실시간 에러 로그 분석</span>
                                    </div>
                                </div>
                            </div>

                            <div class="mt-12 px-2">
                                <div class="flex justify-between items-end mb-4">
                                    <span class="text-xs font-black text-slate-400 uppercase tracking-widest text-sm">System Stability</span>
                                    <span class="text-lg font-black text-blue-600 italic">99.9% Perfect</span>
                                </div>
                                <div class="h-4 bg-slate-100 rounded-full overflow-hidden shadow-inner">
                                    <div class="h-full bg-gradient-to-r from-blue-600 to-blue-400 w-[99.9%] animate-pulse"></div>
                                </div>
                            </div>
                        </div>
                    
                        <div class="bg-slate-50 p-6 rounded-2xl border border-slate-100 grid grid-cols-3 gap-6">
                            <div class="text-center"><p class="text-[10px] font-black text-slate-400 uppercase mb-2">Runtime</p><p class="text-sm font-bold text-slate-800">uv Engine</p></div>
                            <div class="text-center border-x border-slate-200"><p class="text-[10px] font-black text-slate-400 uppercase mb-2">Auth</p><p class="text-sm font-bold text-slate-800">ADC / SDK</p></div>
                            <div class="text-center"><p class="text-[10px] font-black text-slate-400 uppercase mb-2">Protocol</p><p class="text-sm font-bold text-slate-800">MCP 1.0</p></div>
                        </div>
                    </div>
                </div>
            
                <div class="bg-white/60 backdrop-blur-xl p-10 rounded-[2.5rem] border border-slate-200 grid grid-cols-1 md:grid-cols-3 gap-12 relative shadow-lg">
                    <div class="flex flex-col items-center text-center">
                        <div class="w-14 h-14 bg-slate-100 rounded-2xl flex items-center justify-center mb-5 text-slate-500 font-black text-lg shadow-sm">01</div>
                        <h4 class="text-md font-extrabold text-slate-800 mb-3 uppercase tracking-tight">Infra Setup</h4>
                        <p class="text-xs text-slate-500 leading-relaxed font-medium">Node.js, Python 및 <br>uv 격리 환경 구축</p>
                    </div>
                    <div class="flex flex-col items-center text-center relative">
                        <div class="w-14 h-14 bg-blue-100 rounded-2xl flex items-center justify-center mb-5 text-blue-600 font-black text-lg shadow-sm">02</div>
                        <h4 class="text-md font-extrabold text-slate-800 mb-3 uppercase tracking-tight">Auth & Link</h4>
                        <p class="text-xs text-slate-500 leading-relaxed font-medium">GCP 통합 인증 및 <br>mcp.json 서버 등록</p>
                    </div>
                    <div class="flex flex-col items-center text-center">
                        <div class="w-14 h-14 bg-emerald-100 rounded-2xl flex items-center justify-center mb-5 text-emerald-600 font-black text-lg shadow-sm">03</div>
                        <h4 class="text-md font-extrabold text-slate-800 mb-3 uppercase tracking-tight">Data Insight</h4>
                        <p class="text-xs text-slate-500 leading-relaxed font-medium">@bigquery / @logging <br>실전 업무 활용</p>
                    </div>
                </div>
            </div>
        </div>

        <div id="view-wizard" class="hidden">
            <div class="flex flex-col lg:flex-row gap-8">
                <div class="w-full lg:w-1/4">
                    <div class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden sticky top-24">
                        <div class="p-4 bg-slate-50 border-b border-slate-200"><h3 class="font-bold text-slate-700">진행 단계</h3></div>
                        <ul class="divide-y divide-slate-100" id="step-list"></ul>
                    </div>
                </div>
                <div class="w-full lg:w-3/4">
                    <div id="step-content-container" class="bg-white p-8 rounded-xl shadow-sm border border-slate-200 min-h-[500px]"></div>
                    <div class="mt-6 flex justify-between">
                        <button id="btn-prev" onclick="changeStep(-1)" class="px-6 py-2 rounded border border-slate-300 text-slate-600 hover:bg-slate-50 disabled:opacity-50">이전</button>
                        <button id="btn-next" onclick="changeStep(1)" class="btn-primary px-6 py-2">다음 단계</button>
                    </div>
                </div>
            </div>
        </div>

        <div id="view-troubleshoot" class="hidden max-w-4xl mx-auto">
            <h2 class="text-3xl font-bold text-slate-900 mb-8 text-center">⚠️ 통합 트러블슈팅</h2>
            <p class="text-center text-slate-600 mb-10">연동 중 발생할 수 있는 주요 오류와 해결 방법입니다.</p>            
            <div class="space-y-4" id="faq-container"></div>
        </div>
    </main>

    <footer class="bg-slate-900 text-slate-400 py-8 mt-auto">
        <div class="max-w-7xl mx-auto px-4 text-center"><p>GCP 통합 MCP 연동 가이드 | 운영2센터 TF | 2026.02.20</p></div>
    </footer>

    <script>
        const steps = [
            {
                id: 1,
                title: "사전 준비",
                desc: "공식 링크 및 도구 설치 확인",
                content: `
                    <h2 class="text-2xl font-bold text-slate-800 mb-4">📋 1단계: 필수 도구 설치 및 링크</h2>
                    <p class="text-slate-600 mb-6">이 섹션에서는 환경 구축에 필요한 기본 엔진들을 설치합니다. 도구가 없다면 공식 페이지 버튼을 클릭해 설치하세요.</p>
                    
                    <div class="space-y-6">
                        <div class="p-4 border border-slate-200 rounded-lg">
                            <div class="flex justify-between items-center mb-3">
                                <h3 class="font-bold">1. Node.js</h3>
                                <a href="https://nodejs.org/" target="_blank" class="link-card">공식 설치 페이지 ⧉</a>
                            </div>
                            <p class="text-sm text-slate-500 mb-2">버전 확인 명령어:</p>
                            <div class="code-block flex justify-between items-center">
                                <code>node -v</code>
                                <button onclick="copyToClipboard('node -v')" class="text-xs bg-slate-700 px-2 py-1 rounded">복사</button>
                            </div>
                        </div>

                        <div class="p-4 border border-slate-200 rounded-lg">
                            <div class="flex justify-between items-center mb-3">
                                <h3 class="font-bold">2. Python</h3>
                                <a href="https://www.python.org/downloads/" target="_blank" class="link-card">공식 설치 페이지 ⧉</a>
                            </div>
                            <p class="text-sm text-slate-500 mb-2">버전 확인 명령어:</p>
                            <div class="code-block flex justify-between items-center">
                                <code>python --version</code>
                                <button onclick="copyToClipboard('python --version')" class="text-xs bg-slate-700 px-2 py-1 rounded">복사</button>
                            </div>
                        </div>

                        <div class="p-4 border border-slate-200 rounded-lg">
                            <div class="flex justify-between items-center mb-3">
                                <h3 class="font-bold">3. Google Cloud SDK</h3>
                                <a href="https://cloud.google.com/sdk/docs/install?hl=ko" target="_blank" class="link-card">공식 설치 페이지 ⧉</a>
                            </div>
                            <p class="text-sm text-slate-500 mb-2">버전 확인 명령어:</p>
                            <div class="code-block flex justify-between items-center">
                                <code>gcloud --version</code>
                                <button onclick="copyToClipboard('gcloud --version')" class="text-xs bg-slate-700 px-2 py-1 rounded">복사</button>
                            </div>
                        </div>
                    </div>

                    <div class="verify-box">
                        <h4 class="font-bold text-emerald-800 mb-1">✅ [검증하기]</h4>
                        <p class="text-sm text-emerald-700">명령어 입력 시 버전 정보가 출력되나요? 그렇다면 모든 엔진이 준비되었습니다.</p>
                    </div>
                `
            },
            {
                id: 2,
                title: "환경 최적화",
                desc: "Windows 로그 경로 유효성 검사",
                content: `
                    <h2 class="text-2xl font-bold text-slate-800 mb-4">🛠️ 2단계: Windows 환경 최적화</h2>
                    <p class="text-slate-600 mb-6">BigQuery MCP 서버는 <code>/tmp</code>를 로그 경로로 사용합니다. Windows 루트에 폴더를 생성합니다.</p>

                    <div class="code-block flex justify-between items-center mb-4">
                        <code>mkdir C:\\tmp</code>
                        <button onclick="copyToClipboard('mkdir C:\\\\tmp')" class="text-xs bg-slate-700 px-2 py-1 rounded">복사</button>
                    </div>

                    <div class="verify-box">
                        <h4 class="font-bold text-emerald-800 mb-1">✅ [검증하기]</h4>
                        <p class="text-sm text-emerald-700 mb-2">아래 명령어를 입력하여 폴더가 실제로 존재하는지 확인하세요:</p>
                        <div class="code-block flex justify-between items-center bg-emerald-900 border border-emerald-500">
                            <code>Test-Path C:\\tmp</code>
                            <button onclick="copyToClipboard('Test-Path C:\\\\tmp')" class="text-xs bg-emerald-800 px-2 py-1 rounded">복사</button>
                        </div>
                        <p class="text-xs text-emerald-600 mt-2">출력값이 **True**이면 성공입니다.</p>
                    </div>
                `
            },
            {
                id: 3,
                title: "uv 설치",
                desc: "NPM 의존성 제거 및 설치 확인",
                content: `
                    <h2 class="text-2xl font-bold text-slate-800 mb-4">📦 3단계: uv 도구 설치 및 공식 문서</h2>
                    <p class="text-slate-600 mb-4">가장 안정적인 실행 환경을 위해 <code>uv</code>를 설치합니다. uv는 Python 패키지를 초고속으로 관리해줍니다.</p>

                    <div class="flex items-center space-x-4 mb-6">
                        <a href="https://github.com/astral-sh/uv" target="_blank" class="link-card">uv 공식 GitHub ⧉</a>
                        <a href="https://docs.astral.sh/uv/getting-started/installation/" target="_blank" class="link-card">상세 설치 가이드 ⧉</a>
                    </div>

                    <p class="text-sm text-slate-500 mb-2">설치 명령어:</p>
                    <div class="code-block flex justify-between items-center mb-4">
                        <code>pip install uv</code>
                        <button onclick="copyToClipboard('pip install uv')" class="text-xs bg-slate-700 px-2 py-1 rounded">복사</button>
                    </div>

                    <div class="verify-box">
                        <h4 class="font-bold text-emerald-800 mb-1">✅ [검증하기]</h4>
                        <p class="text-sm text-emerald-700 mb-2">uv가 정상적으로 설치되었는지 확인하세요:</p>
                        <div class="code-block flex justify-between items-center bg-emerald-900">
                            <code>uv --version</code>
                        </div>
                    </div>
                `
            },
            {
                id: 4,
                title: "GCP 인증",
                desc: "인증 가이드 및 토큰 검사",
                content: `
                    <h2 class="text-2xl font-bold text-slate-800 mb-4">🔑 4단계: Google Cloud 인증 및 검증</h2>
                    <p class="text-slate-600 mb-6">AI가 BigQuery에 접근할 수 있도록 자격 증명을 생성합니다. 로그인이 안 된다면 가이드를 참조하세요.</p>

                    <div class="mb-6">
                        <a href="https://cloud.google.com/sdk/gcloud/reference/auth/application-default/login" target="_blank" class="link-card">인증 명령어 공식 문서 ⧉</a>
                    </div>

                    <div class="code-block flex justify-between items-center mb-6">
                        <code>gcloud auth application-default login</code>
                        <button onclick="copyToClipboard('gcloud auth application-default login')" class="text-xs bg-slate-700 px-2 py-1 rounded">복사</button>
                    </div>

                    <div class="verify-box">
                        <h4 class="font-bold text-emerald-800 mb-1">✅ [검증하기]</h4>
                        <p class="text-sm text-emerald-700 mb-2">실제로 유효한 인증 토큰이 발행되는지 확인합니다:</p>
                        <div class="code-block flex justify-between items-center bg-emerald-900 mb-2">
                            <code>gcloud auth application-default print-access-token</code>
                            <button onclick="copyToClipboard('gcloud auth application-default print-access-token')" class="text-xs bg-emerald-800 px-2 py-1 rounded">복사</button>
                        </div>
                    </div>
                `
            },
{
                id: 5,
                title: "mcp.json 통합 설정",
                desc: "BigQuery & Logging 동시 등록",
                content: `                                        
                    <h2 class="text-2xl font-bold text-slate-800 mb-4">⚙️ 5단계: 통합 mcp.json 설정 및 생성</h2>
                    <p class="text-slate-600 mb-2">Cursor AI가 두 서비스(BigQuery, Logging)에 동시에 접근할 수 있도록 통합 구성 파일을 작성합니다.</p>
                    <p class="text-slate-600 mb-4 font-medium">연결을 위해서는 '프로젝트 ID'와 '리전 명칭' 정보가 반드시 필요합니다.</p>

                    <div class="p-4 bg-blue-50 border-l-4 border-blue-500 rounded-r-lg mb-6">
                        <p class="text-sm text-blue-700">
                            <strong>💡 안내:</strong> 원활한 설명을 위해 프로젝트 ID는 <code class="bg-blue-100 px-1 rounded">project_nm</code>, 리전 명칭은 <code class="bg-blue-100 px-1 rounded">location_nm</code>으로 임의 지정하여 안내합니다.
                        </p>
                    </div>

                    
                    <div class="space-y-6">
                        <div class="p-4 border border-slate-200 rounded-lg">
                            <h3 class="font-bold mb-3">1. 프로젝트 정보 입력</h3>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <input type="text" id="input-project" placeholder="project_nm" class="p-2 border rounded text-sm" oninput="updateJson()">
                                <input type="text" id="input-location" value="location_nm" class="p-2 border rounded text-sm" oninput="updateJson()">
                            </div>
                        </div>

                        <div class="p-4 border border-slate-200 rounded-lg">
                            <div class="flex justify-between items-center mb-2">
                                <h3 class="font-bold">2. 생성된 통합 설정 코드</h3>
                                <button onclick="copyJson()" class="text-xs bg-blue-600 text-white px-2 py-1 rounded hover:bg-blue-700">전체 복사</button>
                            </div>
                            <pre id="json-output" class="code-block text-xs h-64 overflow-y-auto"></pre>
                        </div>
                    </div>

                    <div class="verify-box">
                        <h4 class="font-bold text-emerald-800 mb-1">✅ [검증하기]</h4>
                        <p class="text-sm text-emerald-700">Cursor 설정(<code>Ctrl+Shift+J</code>) > Tools > MCP > Open JSON Config를 클릭해 위 코드를 붙여넣고 저장하세요.</p>
                    </div>
                `
            },
            {
                id: 6,
                title: "BigQuery 연동",
                desc: "데이터 에이전트 활용",
                content: `
                    <h2 class="text-2xl font-bold text-slate-800 mb-4">📊 6단계: BigQuery 데이터 에이전트 이해</h2>
                    <p class="text-slate-600 mb-6">AI가 BigQuery의 방대한 데이터를 실시간으로 탐색하고 쿼리하는 원리를 파악합니다.</p>
                    
                    <div class="space-y-6">
                        <div class="p-4 border border-slate-200 rounded-lg">
                            <h3 class="font-bold mb-2">데이터 엔지니어링 핵심 가치</h3>
                            <ul class="text-sm text-slate-600 space-y-3">
                                <li class="flex items-start"><span class="text-emerald-600 mr-2">•</span> <strong>스키마 자동 탐색:</strong> 수천 개의 테이블 구조를 AI가 스스로 학습하여 제안</li>
                                <li class="flex items-start"><span class="text-emerald-600 mr-2">•</span> <strong>표준 SQL 최적화:</strong> 복잡한 Join 로직을 BigQuery 표준에 맞춰 자동 생성</li>
                                <li class="flex items-start"><span class="text-emerald-600 mr-2">•</span> <strong>비용 제어:</strong> 실행 전 Dry Run을 통해 스캔 용량과 비용을 사전 안내</li>
                            </ul>
                        </div>

                        <div class="p-4 bg-emerald-50 border border-emerald-100 rounded-lg text-emerald-800">
                            <h3 class="font-bold mb-2">💡 실전 호출 예시</h3>
                            <code class="text-xs font-mono">@bigquery project_nm의 주요 테이블 구조 알려줘</code>
                        </div>
                    </div>
                `
            },
            {
                id: 7,
                title: "Logging 연동",
                desc: "로그 분석 서버 활용",
                content: `
                    <h2 class="text-2xl font-bold text-slate-800 mb-4">📡 7단계: GCP Logging 운영 에이전트 이해</h2>
                    <p class="text-slate-600 mb-6">시스템 에러 로그를 긁어와 장애 원인을 즉시 파악하는 AIOps 환경을 이해합니다.</p>

                    <div class="space-y-6">
                        <div class="p-4 border border-slate-200 rounded-lg">
                            <h3 class="font-bold mb-2">운영 및 장애 대응 시나리오</h3>
                            <ul class="text-sm text-slate-600 space-y-3">
                                <li class="flex items-start"><span class="text-blue-600 mr-2">•</span> <strong>근본 원인 분석(RCA):</strong> 에러 메시지를 해석하여 발생 지점과 원인 요약</li>
                                <li class="flex items-start"><span class="text-blue-600 mr-2">•</span> <strong>코드 매핑 디버깅:</strong> 로그상의 에러와 실제 소스 코드의 라인을 비교 분석</li>
                                <li class="flex items-start"><span class="text-blue-600 mr-2">•</span> <strong>실시간 모니터링:</strong> 특정 시간대의 중요 장애 로그를 실시간으로 요약 보고</li>
                            </ul>
                        </div>

                        <div class="p-4 bg-emerald-50 border border-emerald-100 rounded-lg text-emerald-800">
                            <h3 class="font-bold mb-2">💡 실전 호출 예시</h3>
                            <code class="text-xs font-mono">@gcp-logging 최근 10분간 발생한 에러 원인 분석해줘</code>
                        </div>
                    </div>
                `
            },
            {
                id: 8,
                title: "최종 테스트",
                desc: "통합 연동 확인 및 시연",
                content: `
                    <h2 class="text-2xl font-bold text-slate-800 mb-4">🚀 8단계: 최종 통합 검증 및 시연</h2>
                    <p class="text-slate-600 mb-6">모든 설정이 완료되었습니다. 아래 순서에 따라 통합 연동 여부를 확인합니다.</p>

                    <div class="space-y-6">
                        <div class="p-4 border border-slate-200 rounded-lg">
                            <h3 class="font-bold mb-3">1. 환경 재시작 및 상태 확인</h3>
                            <p class="text-sm text-slate-600 mb-2">Cursor를 재시작한 후 <strong>Settings > Tools > MCP</strong> 메뉴에서 두 서버가 모두 <span class="text-emerald-600 font-bold">Active</span>인지 확인합니다.</p>
                        </div>

                        <div class="p-4 border border-slate-200 rounded-lg">
                            <h3 class="font-bold mb-3">2. 실전 통합 테스트</h3>
                            <div class="space-y-3">
                                <div class="flex justify-between items-center p-2 bg-slate-50 rounded">
                                    <span class="text-xs font-mono">@bigquery 연결 확인</span>
                                    <button onclick="copyToClipboard('@bigquery 연결 확인')" class="text-[10px] bg-slate-200 px-2 py-1 rounded">복사</button>
                                </div>
                                <div class="flex justify-between items-center p-2 bg-slate-50 rounded">
                                    <span class="text-xs font-mono">@gcp-logging 로그 확인</span>
                                    <button onclick="copyToClipboard('@gcp-logging 로그 확인')" class="text-[10px] bg-slate-200 px-2 py-1 rounded">복사</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="verify-box">
                        <h4 class="font-bold text-emerald-800 mb-1">🎉 [모든 연동 완료]</h4>
                        <p class="text-sm text-emerald-700">이제 여러분은 데이터와 로그를 자유자재로 다루는 AI 엔지니어링 환경을 갖추게 되었습니다!</p>
                    </div>
                `
            }         
        ];

        let currentStepIndex = 0;
        function navigateTo(vId) { ['overview', 'wizard', 'troubleshoot'].forEach(v => document.getElementById(`view-${v}`).classList.add('hidden')); document.getElementById(`view-${vId}`).classList.remove('hidden'); if(vId === 'wizard') { renderStepList(); renderStepContent(); } }
        function renderStepList() { document.getElementById('step-list').innerHTML = steps.map((s, i) => `<li class="cursor-pointer ${i === currentStepIndex ? 'step-active' : 'step-inactive'}" onclick="goToStep(${i})"><div class="p-4"><span class="text-xs font-bold">STEP ${s.id}</span><h4 class="text-sm font-bold">${s.title}</h4></div></li>`).join(''); }
        function renderStepContent() { document.getElementById('step-content-container').innerHTML = `<div class="fade-in">${steps[currentStepIndex].content}</div>`; document.getElementById('btn-prev').disabled = currentStepIndex === 0; document.getElementById('btn-next').textContent = currentStepIndex === steps.length - 1 ? '완료' : '다음 단계'; if(steps[currentStepIndex].id === 5) updateJson(); }
        function changeStep(d) { currentStepIndex += d; renderStepList(); renderStepContent(); }
        function goToStep(i) { currentStepIndex = i; renderStepList(); renderStepContent(); }
        function updateJson() {
            const p = document.getElementById('input-project')?.value || "project_nm";
            const l = document.getElementById('input-location')?.value || "location_nm";
            const json = {
                mcpServers: {
                    bigquery: { command: "python", args: ["-m", "uv", "tool", "run", "mcp-server-bigquery", "--project", p, "--location", l] },
                    "gcp-logging": { command: "npx", args: ["-y", "@google-cloud/observability-mcp"], env: { GOOGLE_CLOUD_PROJECT: p } }
                }
            };
            document.getElementById('json-output').textContent = JSON.stringify(json, null, 2);
        }
        function copyJson() { navigator.clipboard.writeText(document.getElementById('json-output').textContent).then(() => alert('통합 설정이 복사되었습니다.')); }
        window.onload = () => {
            // 1. 차트 로직 삭제 (캔버스가 없으므로 오류 방지)
            // 더 이상 Chart.js를 사용하지 않으므로 관련 코드를 제거합니다.

            // 2. 트러블슈팅(FAQ) 데이터 구성
            const faqs = [
                /* 1단계: 기반 구축 관련 */
                { 
                    q: "uv가 무엇이며 꼭 설치해야 하나요?", 
                    a: "기존 pip나 npm보다 훨씬 빠르고 안정적인 패키지 실행 도구입니다. 격리된 환경을 제공하여 의존성 충돌을 방지하므로 연동 성공률을 99%까지 높여줍니다." 
                },
                { 
                    q: "Windows 환경에서 로그 경로(C:\\tmp) 관련 에러가 발생합니다.", 
                    a: "BigQuery MCP 서버는 로그 기록을 위해 /tmp 경로를 고정적으로 사용합니다. Windows에는 이 경로가 없으므로 터미널에서 'mkdir C:\\tmp'를 실행하여 수동으로 생성해야 합니다." 
                },
            
                /* 2단계: GCP 인증 관련 */
                { 
                    q: "인증 단계에서 프로젝트를 찾지 못하거나 권한 에러가 납니다.", 
                    a: "'gcloud auth application-default login' 실행 시 팝업되는 브라우저에서 반드시 'project_nm' 프로젝트 접근 권한이 있는 회사 계정으로 로그인했는지 확인하세요." 
                },
            
                /* 3단계: mcp.json 설정 관련 */
                { 
                    q: "mcp.json 설정 후 목록에 빨간불(Error)이 들어오고 작동하지 않습니다.", 
                    a: "가장 흔한 원인은 JSON 문법 오류입니다. 특히 bigquery 설정 블록과 gcp-logging 블록 사이의 쉼표(,)가 누락되지 않았는지 꼭 확인하세요." 
                },
                { 
                    q: "프로젝트 ID나 리전 에러가 계속됩니다.", 
                    a: "mcp.json 내의 프로젝트 ID(project_nm)와 리전 명칭(location_nm)이 오타 없이 입력되었는지, 데이터셋이 실제 해당 리전에 존재하는지 확인하세요." 
                },
            
                /* 4단계: 서비스 활성화 및 특화 권한 관련 */
                { 
                    q: "BigQuery 데이터는 보이는데 로그(Logging)가 불러와지지 않습니다.", 
                    a: "GCP 콘솔 IAM 메뉴에서 본인 계정에 'Logging Viewer(로그 뷰어)' 역할이 할당되어 있는지 확인하세요. 빅쿼리 권한과는 별개로 로깅 전용 권한이 필요합니다." 
                },
                { 
                    q: "설정을 수정했는데 상태등이 여전히 빨간색이거나 반영되지 않습니다.", 
                    a: "Cursor의 MCP 설정 화면 상단의 'Refresh(새로고침)' 아이콘을 누르거나, Cursor AI를 완전히 재시작하여 설정을 다시 로드해야 합니다." 
                }                    
            ];

            // 3. 화면에 FAQ 리스트 렌더링
            const faqContainer = document.getElementById('faq-container');
            if (faqContainer) {
                faqContainer.innerHTML = faqs.map(f => `
                    <div class="bg-white p-6 border border-slate-200 rounded-2xl shadow-sm hover:shadow-md transition-all">
                        <div class="flex items-start gap-3">
                            <span class="text-blue-600 font-black">Q.</span>
                            <strong class="text-slate-800 text-sm">${f.q}</strong>
                        </div>
                        <div class="mt-3 pl-7 flex items-start gap-3 border-t border-slate-50 pt-3">
                            <span class="text-emerald-600 font-black">A.</span>
                            <p class="text-sm text-slate-600 leading-relaxed">${f.a}</p>
                        </div>
                    </div>
                `).join('');
            }
        };
    </script>
</body>
</html>